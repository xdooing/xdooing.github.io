---
title: Git使用VPN代理
date: 2024-05-29 00:00:00 +0800
categories: [Git]
tags: [Git]
pin: false


toc: true
comments: true

math: false
mermaid: true

typora-root-url: ../../xdooing.github.io
---







> 开了VPN之后，git clone/push 仍然会失败，访问不到链接，是由于 git 默认不使用代理导致，配置 git 代理后可提升速度。
>
> 注意以下windows与Linux两种环境下使用git的时候，代理客户端都是运行在windows本地的。

## 查看VPN 本地代理端口

不同 vpn 软件或安装的随机性导致每台机器的端口号并不一致，以显示为准。

![screenshot-20240529-114154](/assets/blog_res/2024-05-29-GitVPN.assets/screenshot-20240529-114154.png)

当前显示 http 端口为：2802；socks5 端口为：2801；

或者：

![](/assets/blog_res/2024-05-29-GitVPN.assets/screenshot-20250509-144436.png)

显示端口号为 7890



## 配置Git代理

### 1. windows上使用git

如果是在windows上面使用git，则只需要设置本地回环地址即可，端口就是代理客户端的端口。

```shell
git config --global http.proxy http://127.0.0.1:{port}
git config --global https.proxy http://127.0.0.1:{port}
或者
git config --global http.proxy socks5://127.0.0.1:{port}
git config --global https.proxy socks5://127.0.0.1:{port}
```

例如我可以配置为下面这样，或者端口号改为7890

```shell
git config --global http.proxy http://127.0.0.1:2802
git config --global https.proxy http://127.0.0.1:2802

git config --global http.proxy socks5://127.0.0.1:2801
git config --global https.proxy socks5://127.0.0.1:2801
```

查看是否配置成功：

```shell
git config --global --list
```

取消Git配置：

```shell
git config --global --unset http.proxy
git config --global --unset https.proxy
```



### 2. Linux上使用git

如果是在Linux上使用git，而代理服务运行在 Windows，则需将 Linux 的代理地址改为 **Windows 的局域网 IP**

ip查看方式：windows terminal 输入`ipconfig`

找到正在使用的网络适配器，例如无线局域网适配器WLAN或以太网适配器Ethernet，下面的ipv4地址就是自己的局域网地址。

![](/assets/blog_res/2024-05-29-GitVPN.assets/ss_20250509203833.png)

接着设置代理客户端为 **允许局域网连接**，这一点很重要，clash可以进行设置。

最后在Linux home目录下创建配置文件：

```shell
# ~/.http_proxy
export http_proxy=http://192.168.31.43:7890
export https_proxy=http://192.168.31.43:7890
```

之后使用git或需要代理的时候，仅需  `source ~/.http_proxy `即可，很方便。
